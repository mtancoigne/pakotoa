- content_for(:title) { t(".title", name: @certificate_authority.name) }

- if !@certificate_authority.committed
  .panel.panel-primary
    .panel-heading
      .panel-title
        = t(".creating_ca_title")
    .panel-body
      %ol
        %li
          %p Decide which <em>attributes</em> the Certification Authority issued certificates' subject will have to contain and define a corresponding <em>policy</em>;
          %p= link_to t('.attributes'), certificate_authority_subject_attributes_path(@certificate_authority), class: "btn btn-default"
        %li
          %p
            Generate OpenSSL
            = link_to "ca", openssl_ca_certificate_authority_path(@certificate_authority, format: :text)
            and
            = link_to "req", openssl_req_certificate_authority_path(@certificate_authority, format: :text)
            configuration snippets and integrate them into <code>config/ssl/openssl.cnf</code>;
        %li
          %p Create the new Certification Authority and sign it using the Root Certification Authority;
          %pre= "$ ./bin/ca-setup #{@certificate_authority.id}.#{@certificate_authority.basename}"
        %li
          %p
            Double-check your settings and
            =link_to t('.commit'), commit_certificate_authority_path(@certificate_authority), class: "btn btn-success", method: :put
          %p The application will check that the certificate is in place and usable.

- if false
  .alert.alert-danger
    %p The Certification Authority's Certificates Revokation List (CLR) needs updating.
    %p
      = link_to content_tag(:i, '', class: "fa fa-refresh") + " Update the Certificates Revokation List", "", class: "btn btn-danger"
      = link_to "Ignore", "", class: "btn btn-default"

.panel.panel-default
  .panel-heading
    .panel-title
      = t(".managers")
      = link_to content_tag(:i, "", class: "fa fa-edit") + " " + t(".users"), certificate_authority_users_path(@certificate_authority), class: "btn btn-link btn-xs pull-right"
      .badge= @certificate_authority.users.count
  .panel-body
    - @certificate_authority.users.each do |user|
      - if user == current_user
        .label.label-primary= user.email
      - else
        .label.label-default= user.email

= link_to t('.edit'), edit_certificate_authority_path(@certificate_authority), class: "btn btn-default"  if can? :edit, @certificate_authority

- if @certificate_authority.committed?
  = link_to t(".manage_certificates"), certificate_authority_certificates_path(@certificate_authority), class: "btn btn-warning"
